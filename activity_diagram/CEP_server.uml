@startuml
start
:SST Cloud Server: Intiailize server;

fork

-> Initiate an agent\n for learning user preferences;

repeat:Start learning\n analytics;

if (New user datasets
 from SST Client?) then (yes)

  :Train new ML model;

  :Deploy new ML model
   for user preferences
   and patterns;
else (no) 
endif 
repeat while(quit?) is (no)

fork again

-> Initiate an agent\n for managing subscription;
repeat:Receive a subcription-related request;

  if ("Register Service"?) then (yes)
    if (Conformance Test?) then (pass)
      :Add Service
       to Registry;
    else (not pass)
      :Request
       conformance;
      detach
    endif
    
  elseif ("Manage Service\n and app"?) then (yes)
    :Manage Service\n and app;

  elseif ("Get service\n list"?) then (yes)
    :Get list
     from Registry;
    :Deliver the list; 
  else (Handle other
   requests)
  endif

repeat while (quit?) is (no)

fork again

repeat:Receive a general request;

  if ("Request\n conformance test") then (yes)
    :Store the app;
    :Inform Tester\n of new app;
  elseif ("Receive app\n conformance\n result") then (yes)
    :Report\n Tester's review;
  elseif ("Check app\n conformance\n request") then (yes)
    :Show\n Requested apps;
  elseif ("Write app\n conformance\n result") then (yes)
    :Receive Tester's\n review;
    :Inform Developer\n of "Test Done";
  elseif ("Check\n Payment Detail") then (yes)
    :Gather app list;
    :Gather purchase
     history;
    :Calculate;
    :Report\n payment detail;
  else (Handle other
   requests)
  endif

repeat while (quit?) is (no)

endfork

stop
@enduml